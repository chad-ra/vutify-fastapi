(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-98351468"],{7455:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("waiting-modal",{attrs:{title:t.title,status:t.status,active:t.active_waiting},on:{statusdailog:t.update_status_wait}}),a("v-container",[a("v-row",{staticClass:"align-center d-flex h-0 pb-20"},[a("v-col",{staticClass:"mx-auto",staticStyle:{"text-align":"center"},attrs:{xl:"3",lg:"4",sm:"9"}},[a("v-card",{staticClass:"bg-orange"},[a("span",{staticClass:"text-purple"},[t._v("สแกนเพื่อทำประเมินแบบทดสอบสมองให้ผู้ป่วย")])]),a("br"),a("v-row",{},[a("v-col",{staticStyle:{"text-align":"center"},attrs:{cols:"12"}},[a("div",[a("v-card",{attrs:{height:"300"}},[a("v-card-text",[a("qrcode-stream",{on:{decode:t.onDecode,init:t.onInit}}),a("br"),a("span",[t._v("สแกน QR ผู้ป่วย")])],1)],1)],1)])],1),a("v-row",{staticClass:"d-flex"},[a("v-col",{staticStyle:{"text-align":"center"},attrs:{cols:"12"}},[a("v-chip",{attrs:{color:"bg-yellow"},on:{click:function(e){return t.$router.push("/azq_public")}}},[a("span",{staticStyle:{color:"purple"}},[t._v("ประเมินแบบไม่ใส่ชื่อ (Anonymous)")])])],1)],1)],1)],1),a("v-row",{directives:[{name:"show",rawName:"v-show",value:!t.$vuetify.breakpoint.mobile,expression:"!$vuetify.breakpoint.mobile"}],staticClass:"align-center",staticStyle:{"padding-top":"15px"},attrs:{justify:"left"}},[a("v-col",{staticClass:"mx-auto",staticStyle:{"text-align":"left"},attrs:{xl:"3",lg:"4",sm:"9"}},[a("v-btn",{staticClass:"border-radius-xl",staticStyle:{"border-color":"#d6d6d629"},attrs:{outlined:"",color:"purple"},on:{click:function(e){return t.$router.go(-1)}}},[a("v-icon",{attrs:{small:""}},[t._v("west")])],1),t._v("         "),a("v-btn",{staticClass:"border-radius-xl",staticStyle:{width:"250px"},attrs:{color:"bg-primary text-white"},on:{click:function(e){return t.$router.push("/member_azq_list")}}},[t._v(" เลือกจากรายชื่อ ")])],1)],1),a("v-footer",{directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.mobile,expression:"$vuetify.breakpoint.mobile"}],staticClass:"action-nav",staticStyle:{height:"60px"},attrs:{fixed:""}},[a("v-row",{staticClass:"align-left",attrs:{justify:"left"}},[a("v-btn",{staticClass:"border-radius-xl",staticStyle:{"border-color":"#d6d6d629"},attrs:{outlined:"",color:"purple"},on:{click:function(e){return t.$router.go(-1)}}},[a("v-icon",{attrs:{small:""}},[t._v("west")])],1),t._v("         "),a("v-btn",{staticClass:"border-radius-xl",staticStyle:{width:"250px"},attrs:{color:"bg-primary text-white"},on:{click:function(e){return t.$router.push("/member_azq_list")}}},[t._v(" เลือกจากรายชื่อ ")])],1)],1)],1)],1)},s=[],r=a("087d"),o=a("5fb0"),l=a("2b0e"),n=a("bb6f"),c={name:"calendar-patient",components:{QrcodeStream:n["QrcodeStream"],WaitingModal:r["a"]},data:()=>({isValid:void 0,camera:"auto",result:null,token:"",size:100,active_waiting:!1,status:"",alert_name:"",passed:!1,query:""}),beforeCreate(){"1"==this.$route.query.from_line&&this.$router.push("/passcode_check?&to=scan_accessdata")},mounted(){},watch:{result(t){t.length>0&&this.submitVal()}},computed:{validationPending(){return void 0===this.isValid&&"off"===this.camera},validationSuccess(){return!0===this.isValid},validationFailure(){return!1===this.isValid}},methods:{update_status_wait(t){this.active_waiting=t},onDecode(t){this.result=t},handleClick(t){this.selected_row=t,this.dialog_edit=!0},edit_data(t){this.edit_aleart=t,this.dialog_edit=!0},generate_qr(){this.token=String("www.checkmong.com/")+Math.random().toString(36).slice(2)},async submitVal(){this.active_waiting=!0,this.title="",this.status="loading";var t=this.result.split("/")[1];await l["default"].axios.post(o["a"]+"/active_patient_qr",{user_scanner_id:this.$store.state.login_detail.user_id,current_qr:t},{headers:{"Content-Type":"application/json"}}).then(e=>{"this_qr_activated"==e.data.detail.status?(this.title="QR code ถูกต้อง",this.status="done",setTimeout(()=>{this.active_waiting=!1,this.$store.commit("setQrPatientId",("2"+t).slice(0,7)),this.$store.commit("setQrPatientInfo",e.data.detail.data),this.$store.commit("setAzq_type",{azq_type:"azq_public"}),this.$router.push("/azq_provider")},2e3)):"this_qr_not_correct"==e.data.detail.status?(this.active_waiting=!0,this.title="กรุณาให้ผู้ป่วยสร้าง QR ใหม่\nและลองใหม่อีกครั้ง",this.status="fail"):(this.active_waiting=!0,this.title="ระบบขัดข้อง",this.status="fail")})},async onInit(t){try{await t}catch(e){"NotAllowedError"===e.name?this.error="ERROR: you need to grant camera access permission":"NotFoundError"===e.name?this.error="ERROR: no camera on this device":"NotSupportedError"===e.name?this.error="ERROR: secure context required (HTTPS, localhost)":"NotReadableError"===e.name?this.error="ERROR: is the camera already in use?":"OverconstrainedError"===e.name?this.error="ERROR: installed cameras are not suitable":"StreamApiNotSupportedError"===e.name?this.error="ERROR: Stream API is not supported in this browser":"InsecureContextError"===e.name?this.error="ERROR: Camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.":this.error=`ERROR: Camera error (${e.name})`}}}},h=c,d=(a("a0ba"),a("2877")),u=a("6544"),p=a.n(u),v=a("8336"),m=a("b0af"),b=a("99d9"),g=a("cc20"),f=a("62ad"),_=a("a523"),C=a("553a"),w=a("132d"),y=a("0fd9"),x=Object(d["a"])(h,i,s,!1,null,"ea1295a8",null);e["default"]=x.exports;p()(x,{VBtn:v["a"],VCard:m["a"],VCardText:b["c"],VChip:g["a"],VCol:f["a"],VContainer:_["a"],VFooter:C["a"],VIcon:w["a"],VRow:y["a"]})},"8adc":function(t,e,a){},"98aa":function(t,e,a){},a0ba:function(t,e,a){"use strict";a("98aa")},cc20:function(t,e,a){"use strict";a("8adc");var i=a("58df"),s=a("0789"),r=a("9d26"),o=a("a9ad"),l=a("4e82"),n=a("7560"),c=a("f2e7"),h=a("1c87"),d=a("af2b"),u=a("d9bd");e["a"]=Object(i["a"])(o["a"],d["a"],h["a"],n["a"],Object(l["a"])("chipGroup"),Object(c["b"])("inputValue")).extend({name:"v-chip",props:{active:{type:Boolean,default:!0},activeClass:{type:String,default(){return this.chipGroup?this.chipGroup.activeClass:""}},close:Boolean,closeIcon:{type:String,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},disabled:Boolean,draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:Boolean,outlined:Boolean,pill:Boolean,tag:{type:String,default:"span"},textColor:String,value:null},data:()=>({proxyClass:"v-chip--active"}),computed:{classes(){return{"v-chip":!0,...h["a"].options.computed.classes.call(this),"v-chip--clickable":this.isClickable,"v-chip--disabled":this.disabled,"v-chip--draggable":this.draggable,"v-chip--label":this.label,"v-chip--link":this.isLink,"v-chip--no-color":!this.color,"v-chip--outlined":this.outlined,"v-chip--pill":this.pill,"v-chip--removable":this.hasClose,...this.themeClasses,...this.sizeableClasses,...this.groupClasses}},hasClose(){return Boolean(this.close)},isClickable(){return Boolean(h["a"].options.computed.isClickable.call(this)||this.chipGroup)}},created(){const t=[["outline","outlined"],["selected","input-value"],["value","active"],["@input","@active.sync"]];t.forEach(([t,e])=>{this.$attrs.hasOwnProperty(t)&&Object(u["a"])(t,e,this)})},methods:{click(t){this.$emit("click",t),this.chipGroup&&this.toggle()},genFilter(){const t=[];return this.isActive&&t.push(this.$createElement(r["a"],{staticClass:"v-chip__filter",props:{left:!0}},this.filterIcon)),this.$createElement(s["b"],t)},genClose(){return this.$createElement(r["a"],{staticClass:"v-chip__close",props:{right:!0,size:18},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:t=>{t.stopPropagation(),t.preventDefault(),this.$emit("click:close"),this.$emit("update:active",!1)}}},this.closeIcon)},genContent(){return this.$createElement("span",{staticClass:"v-chip__content"},[this.filter&&this.genFilter(),this.$slots.default,this.hasClose&&this.genClose()])}},render(t){const e=[this.genContent()];let{tag:a,data:i}=this.generateRouteLink();i.attrs={...i.attrs,draggable:this.draggable?"true":void 0,tabindex:this.chipGroup&&!this.disabled?0:i.attrs.tabindex},i.directives.push({name:"show",value:this.active}),i=this.setBackgroundColor(this.color,i);const s=this.textColor||this.outlined&&this.color;return t(a,this.setTextColor(s,i),e)}})}}]);
//# sourceMappingURL=chunk-98351468.8919775c.js.map