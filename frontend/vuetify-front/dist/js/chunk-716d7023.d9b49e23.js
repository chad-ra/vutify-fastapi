(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-716d7023"],{"1caf":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("waiting-modal",{attrs:{title:t.title,status:t.status,active:t.active_waiting},on:{statusdailog:t.update_status_wait}}),a("v-container",[a("v-row",{staticClass:"align-center d-flex h-0 pb-20"},[a("v-col",{staticClass:"mx-auto",staticStyle:{"text-align":"center"},attrs:{xl:"3",lg:"4",sm:"8"}},[a("v-card",{staticClass:"bg-orange"},[a("span",{staticClass:"text-purple"},[t._v("สแกนเพื่อเรียกดูข้อมูลผู้ป่วย")])]),a("br"),a("v-row",{},[a("v-col",{staticStyle:{"text-align":"center"},attrs:{cols:"12"}},[a("div",[a("v-card",{attrs:{height:"300"}},[a("v-card-text",[a("qrcode-stream",{on:{decode:t.onDecode,init:t.onInit}}),a("br"),a("span",[t._v("สแกน QR ผู้ป่วย")])],1)],1)],1)])],1)],1)],1),a("v-row",{directives:[{name:"show",rawName:"v-show",value:!t.$vuetify.breakpoint.mobile,expression:"!$vuetify.breakpoint.mobile"}],staticClass:"align-center",staticStyle:{"padding-top":"15px"}},[a("v-col",{staticClass:"mx-auto",staticStyle:{"text-align":"left"},attrs:{xl:"3",lg:"4",sm:"8"}},[a("v-btn",{staticClass:"border-radius-xl",staticStyle:{"border-color":"#d6d6d629"},attrs:{outlined:"",color:"purple"},on:{click:function(e){return t.$router.go(-1)}}},[a("v-icon",{attrs:{small:""}},[t._v("west")])],1),t._v("         "),a("v-btn",{staticClass:"border-radius-xl",staticStyle:{width:"60%"},attrs:{color:"bg-primary text-white"},on:{click:function(e){return t.$router.push("/member_patient_data_list")}}},[t._v(" เลือกจากรายชื่อ ")])],1)],1),a("v-footer",{directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.mobile,expression:"$vuetify.breakpoint.mobile"}],staticClass:"action-nav",staticStyle:{height:"60px"},attrs:{fixed:""}},[a("v-row",{staticClass:"align-left"},[a("v-btn",{staticClass:"border-radius-xl",staticStyle:{"border-color":"#d6d6d629"},attrs:{outlined:"",color:"purple"},on:{click:function(e){return t.$router.go(-1)}}},[a("v-icon",{attrs:{small:""}},[t._v("west")])],1),t._v("         "),a("v-btn",{staticClass:"border-radius-xl",staticStyle:{width:"60%"},attrs:{color:"bg-primary text-white"},on:{click:function(e){return t.$router.push("/member_patient_data_list")}}},[t._v(" เลือกจากรายชื่อ ")])],1)],1)],1)],1)},r=[],s=a("087d"),o=a("5fb0"),n=a("2b0e"),c=a("bb6f"),l={name:"calendar-patient",components:{QrcodeStream:c["QrcodeStream"],WaitingModal:s["a"]},data:()=>({query:"",title:"",isValid:void 0,camera:"auto",result:null,token:"",size:100,active_waiting:!1,status:"",alert_name:""}),beforeCreate(){"1"==this.$route.query.from_line&&this.$router.push("/passcode_check?&to=scan_accessdata")},mounted(){},watch:{result(t){t.length>0&&this.submitVal()}},computed:{validationPending(){return void 0===this.isValid&&"off"===this.camera},validationSuccess(){return!0===this.isValid},validationFailure(){return!1===this.isValid}},methods:{getValueFrom(){this.query=this.$route.query,"1"==this.query.from_line&&this.$router.push("/passcode_check?&to=scan_accessdata")},update_status_wait(t){this.active_waiting=t},onDecode(t){this.result=t},handleClick(t){this.selected_row=t,this.dialog_edit=!0},edit_data(t){this.edit_aleart=t,this.dialog_edit=!0},generate_qr(){this.token=String("www.checkmong.com/")+Math.random().toString(36).slice(2)},async submitVal(){this.active_waiting=!0,this.title="",this.status="loading";var t=this.result.split("/")[1];await n["default"].axios.post(o["a"]+"/active_patient_qr",{user_scanner_id:this.$store.state.login_detail.user_id,current_qr:t},{headers:{"Content-Type":"application/json"}}).then(e=>{"this_qr_activated"==e.data.detail.status?(this.title="QR code ถูกต้อง",this.status="done",setTimeout(()=>{this.active_waiting=!1,this.$store.commit("setQrPatientId",("2"+t).slice(0,7)),this.$store.commit("setQrPatientInfo",e.data.detail.data),this.$router.push("/view_patient_health_record")},2e3)):"this_qr_not_correct"==e.data.detail.status?(this.active_waiting=!0,this.title="กรุณาให้ผู้ป่วยสร้าง QR ใหม่\nและลองใหม่อีกครั้ง",this.status="fail"):(this.active_waiting=!0,this.title="ระบบขัดข้อง",this.status="fail")})},async onInit(t){try{await t}catch(e){"NotAllowedError"===e.name?this.error="ERROR: you need to grant camera access permission":"NotFoundError"===e.name?this.error="ERROR: no camera on this device":"NotSupportedError"===e.name?this.error="ERROR: secure context required (HTTPS, localhost)":"NotReadableError"===e.name?this.error="ERROR: is the camera already in use?":"OverconstrainedError"===e.name?this.error="ERROR: installed cameras are not suitable":"StreamApiNotSupportedError"===e.name?this.error="ERROR: Stream API is not supported in this browser":"InsecureContextError"===e.name?this.error="ERROR: Camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.":this.error=`ERROR: Camera error (${e.name})`}}}},d=l,u=(a("e018"),a("2877")),h=a("6544"),m=a.n(h),v=a("8336"),p=a("b0af"),_=a("99d9"),w=a("62ad"),b=a("a523"),g=a("553a"),f=a("132d"),R=a("0fd9"),x=Object(u["a"])(d,i,r,!1,null,"379e77b6",null);e["default"]=x.exports;m()(x,{VBtn:v["a"],VCard:p["a"],VCardText:_["c"],VCol:w["a"],VContainer:b["a"],VFooter:g["a"],VIcon:f["a"],VRow:R["a"]})},"45dd":function(t,e,a){},e018:function(t,e,a){"use strict";a("45dd")}}]);
//# sourceMappingURL=chunk-716d7023.d9b49e23.js.map