(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fbcd145"],{1101:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("waiting-modal",{attrs:{title:t.title,status:t.status,active:t.active_waiting},on:{statusdailog:t.update_status_wait}}),a("v-dialog",{attrs:{width:"250"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-purple",staticStyle:{"font-weight":"300","font-size":"16px"}},[t._v(" "+t._s(t.selected_row.provider_name)+" ")]),a("v-card-text",[a("v-list-item",{attrs:{"three-line":""}},[a("v-list-item-content",[a("v-list-item-title",[a("b",[t._v("ชื่อ : ")]),t._v("   "+t._s(t.selected_row.patient_name))]),a("v-list-item-title",[a("b",[t._v("สถานะไลน์ : ")]),t._v("  "+t._s(t.selected_row.line_status?"มีไลน์":"ไม่มีไลน์"))])],1)],1)],1),a("v-card-actions",{staticStyle:{"justify-content":"space-between"}},[a("v-btn",{staticClass:"ma-2",attrs:{"x-small":"",outlined:"",fab:"",color:"red"},on:{click:function(e){t.cf_dialog=!0}}},[a("v-icon",[t._v("delete_forever")])],1),t._v("   "),a("v-btn",{attrs:{color:"bg-purple text-white"},on:{click:function(e){t.dialog=!1}}},[t._v("ตกลง")])],1)],1)],1),a("v-dialog",{attrs:{width:"300"},model:{value:t.cf_dialog,callback:function(e){t.cf_dialog=e},expression:"cf_dialog"}},[a("v-card",[a("v-card-text",{staticStyle:{"text-align":"center"}},[a("br"),a("v-btn",{staticClass:"ma-2",attrs:{small:"",outlined:"",fab:"",color:"red"}},[a("v-icon",[t._v("delete_forever")])],1),a("br"),a("span",[t._v("ยืนยันการลบผู้ป่วยจากการดูแล")]),a("br")],1),a("v-card-actions",{staticClass:"d-flex justify-space-around"},[a("v-spacer"),a("v-btn",{staticStyle:{color:"purple"},attrs:{small:"",outlined:""},on:{click:function(e){t.cf_dialog=!1}}},[t._v("ยกเลิก")]),a("v-spacer"),a("v-btn",{attrs:{small:"",color:"bg-purple text-white"},on:{click:t.delRelation}},[t._v("ตกลง")]),a("v-spacer")],1)],1)],1),a("v-dialog",{attrs:{width:"300"},model:{value:t.token_dialog,callback:function(e){t.token_dialog=e},expression:"token_dialog"}},[a("v-card",[a("v-card-title",[t._v("New token")]),a("v-card-text",{staticStyle:{"text-align":"center"},attrs:{persistent:""}},[a("br"),a("v-chip",{attrs:{label:""}},[t._v(t._s(t.new_token))])],1),a("v-card-actions",{staticClass:"d-flex justify-space-around"},[a("v-spacer"),a("v-btn",{attrs:{color:"bg-purple text-white"},on:{click:function(e){return t.$router.go()}}},[t._v("ตกลง")])],1)],1)],1),a("v-dialog",{attrs:{width:"300"},model:{value:t.req_dialog,callback:function(e){t.req_dialog=e},expression:"req_dialog"}},[a("v-card",[a("v-card-title",[t._v("New token")]),a("v-card-text",{staticStyle:{"text-align":"center"},attrs:{persistent:""}},[t._v(" ระบบได้ทำการส่ง Token ไปยังผู้ขอผ่านช่องทางไลน์แล้ว "),a("br"),a("v-chip",{attrs:{label:""}},[t._v(t._s(t.new_token))])],1),a("v-card-actions",{staticClass:"d-flex justify-space-around"},[a("v-spacer"),a("v-btn",{attrs:{color:"bg-purple text-white"},on:{click:function(e){return t.$router.go()}}},[t._v("ตกลง")])],1)],1)],1),a("v-container",[a("v-row",{staticClass:"align-center d-flex h-0 pb-0 pt-2"},[a("v-col",{staticClass:"mx-auto",attrs:{lg:"10",sm:"12"}},[a("v-row",{staticClass:"d-flex"},[a("v-col",{staticStyle:{"text-align":"right","padding-bottom":"0px"},attrs:{cols:"12"}},[a("v-btn",{staticClass:"text-purple",staticStyle:{"box-shadow":"0px 1px 3px rgba(153, 153, 153, 0.12)","border-radius":"7px"},attrs:{elevation:"2",tile:"",color:"bg-orange"},on:{click:t.createToken}},[a("v-icon",{attrs:{left:""}},[t._v(" key ")]),t._v(" Generate token ")],1)],1)],1),a("br"),a("span",[t._v("Eisai Token list")]),t._v(" user_provider_id "),a("v-row",{staticClass:"d-flex"},[a("v-col",{attrs:{cols:"12"}},[a("v-card",{attrs:{elevation:"1"}},[a("v-text-field",{staticStyle:{"padding-top":"0px","margin-top":"0px","background-color":"white","border-top-left-radius":"5px","border-top-right-radius":"5px"},attrs:{"append-icon":"search",label:"","single-line":"","hide-details":"",flat:""},model:{value:t.search_1,callback:function(e){t.search_1=e},expression:"search_1"}}),a("v-data-table",{attrs:{"hide-default-footer":"",search:t.search_1,"disable-pagination":!1,headers:t.headers_token,items:t.token_list,"items-per-page":t.itemsPerPage_1,"mobile-breakpoint":"",page:t.page_1},on:{"update:page":function(e){t.page_1=e},"page-count":function(e){t.pageCount_1=e}},scopedSlots:t._u([{key:"item.is_activate",fn:function(e){var i=e.item;return[a("div",[1==i.is_activate?a("v-chip",{staticClass:"ma-2",attrs:{color:"grey","text-color":"white",small:""}},[t._v("Activated")]):0==i.is_activate?a("v-chip",{staticClass:"ma-2",attrs:{color:"green","text-color":"white",small:""}},[t._v("Available")]):3==i.is_activate?a("v-chip",{staticClass:"ma-2",attrs:{color:"orange","text-color":"white",small:""}},[t._v("Wating")]):t._e()],1)]}}])})],1),a("div",{staticClass:"text-center pt-2"},[a("v-pagination",{attrs:{length:t.pageCount_1},model:{value:t.page_1,callback:function(e){t.page_1=e},expression:"page_1"}})],1)],1)],1)],1)],1)],1),a("v-container",[a("v-row",{staticClass:"align-center d-flex h-0 pb-0 pt-2"},[a("v-col",{staticClass:"mx-auto",attrs:{lg:"10",sm:"12"}},[a("br"),a("span",[t._v("รายการคำขอ")]),a("v-row",{staticClass:"d-flex"},[a("v-col",{staticStyle:{"padding-bottom":"0px"},attrs:{cols:"7"}},[a("span",{staticStyle:{"font-size":"14px"}},[t._v("ทั้งหมด "),a("b",[t._v(t._s(t.req_list.length))]),t._v(" คน")])])],1),a("v-row",{staticClass:"d-flex"},[a("v-col",{staticStyle:{"padding-top":"0px !important"},attrs:{cols:"12"}},[a("v-card",{attrs:{elevation:"1"}},[a("v-text-field",{staticStyle:{"padding-top":"0px","margin-top":"0px","background-color":"white","border-top-left-radius":"5px","border-top-right-radius":"5px"},attrs:{"append-icon":"search",label:"","single-line":"","hide-details":"",flat:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-data-table",{attrs:{"hide-default-footer":"",search:t.search,"disable-pagination":!1,headers:t.headers_request,items:t.req_list,"items-per-page":t.itemsPerPage,"mobile-breakpoint":"",page:t.page},on:{"update:page":function(e){t.page=e},"page-count":function(e){t.pageCount=e}},scopedSlots:t._u([{key:"item.action",fn:function(e){var i=e.item;return["new"==i.status?a("v-btn",{staticClass:"text-purple",staticStyle:{"box-shadow":"0px 1px 3px rgba(153, 153, 153, 0.12)","border-radius":"7px"},attrs:{elevation:"2",color:"bg-orange","x-small":"",height:"32"},on:{click:function(e){return t.createTokenThenSend(i)}}},[a("span",[t._v("สร้าง Token และส่ง")])]):a("v-btn",{staticClass:"text-purple",staticStyle:{"box-shadow":"0px 1px 3px rgba(153, 153, 153, 0.12)","border-radius":"7px"},attrs:{disabled:"",color:"bg-orange","x-small":"",height:"32"}},[a("span",[t._v("สร้าง Token และส่ง")])])]}}])})],1),a("div",{staticClass:"text-center pt-2"},[a("v-pagination",{attrs:{length:t.pageCount},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1)],1)],1)],1)],1)],1)},s=[],n=a("4993"),l=a("5fb0"),o=a("2b0e"),r=a("087d"),c={name:"calendar-patient",components:{CheckmongHomeBar:n["a"],WaitingModal:r["a"]},data:()=>({req_dialog:!1,token_dialog:!1,req_list:[],token_list:[],page:1,pageCount:0,itemsPerPage:10,page_1:1,pageCount_1:0,itemsPerPage_1:10,new_token:"",cf_dialog:!1,patient_list:[],active_waiting:!1,title:"",status:"",search:"",search_1:"",attrs:"",on:"",selected_row:"",dialog:!1,arrayEvents:null,bg_sound:new Audio(a("6f02")),date1:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),date2:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),headers_token:[{text:"No.",value:"id"},{text:"Token",value:"reg_token"},{text:"created date",value:"create_date"},{text:"Activated by",value:"full_name"},{text:"Phone",value:"phone_number"},{text:"Status",value:"is_activate"},{text:"",value:"action"}],headers_request:[{text:"No.",value:"request_token_id"},{text:"Request date",value:"created_date"},{text:"ผู้ขอ",value:"full_name"},{text:"Status",value:"status"},{text:"",value:"action"}]}),beforeCreate(){this.$store.state.is_admin_login.is_admin_login||(this.$router.push("/token_management_login"),this.getPatientList())},mounted(){this.getRequestTokenList()},watch:{},methods:{del_user(t){this.selected_row=t,this.cf_dialog=!0},async createToken(){this.active_waiting=!0,this.title="",this.status="loading",await o["default"].axios.post(l["a"]+"/create_token",{},{headers:{"Content-Type":"application/json"}}).then(t=>{t.data.detail?(this.active_waiting=!1,this.token_dialog=!0,this.new_token=t.data.detail):this.active_waiting=!1})},async createTokenThenSend(t){console.log(t),console.log("his.selected_row.user_relation_id:",this.selected_row.user_relation_id),this.active_waiting=!0,this.title="",this.status="loading",await o["default"].axios.post(l["a"]+"/create_token_then_send",{lineid:t.lineid,contract:t.contract,is_acivate:3,request_token_id:t.request_token_id},{headers:{"Content-Type":"application/json"}}).then(t=>{t.data.detail?(this.active_waiting=!1,this.req_dialog=!0,this.new_token=t.data.detail):this.active_waiting=!1})},async delRelation(){this.active_waiting=!0,this.title="กำลังลบข้อมูล",this.status="loading",await o["default"].axios.post(l["a"]+"/del_relation",{user_relation_id:this.selected_row.user_relation_id},{headers:{"Content-Type":"application/json"}}).then(t=>{t.data?(this.active_waiting=!1,this.dialog_edit=!1,this.dialog=!1,this.$router.go()):this.active_waiting=!1})},async getRequestTokenList(){this.active_waiting=!0,this.title="กำลังอัพเดต",this.status="loading",await o["default"].axios.post(l["a"]+"/get_request_token_list",{},{headers:{"Content-Type":"application/json"}}).then(t=>{t.data?(this.active_waiting=!1,this.req_list=t.data.req_list,this.token_list=t.data.token_list,console.log("this.req_list",this.req_list),console.log("this.token_list",this.token_list)):this.active_waiting=!1})},update_status_wait(t){this.active_waiting=t},handleClick(t){this.selected_row=t,this.dialog=!0}}},d=c,u=(a("11f1"),a("2877")),p=a("6544"),h=a.n(p),g=a("8336"),v=a("b0af"),_=a("99d9"),f=a("cc20"),b=a("62ad"),x=a("a523"),m=a("8fea"),w=a("169a"),k=a("132d"),y=a("da13"),C=a("5d23"),S=a("891e"),$=a("0fd9"),T=a("2fa4"),L=a("8654"),q=Object(u["a"])(d,i,s,!1,null,null,null);e["default"]=q.exports;h()(q,{VBtn:g["a"],VCard:v["a"],VCardActions:_["a"],VCardText:_["c"],VCardTitle:_["d"],VChip:f["a"],VCol:b["a"],VContainer:x["a"],VDataTable:m["a"],VDialog:w["a"],VIcon:k["a"],VListItem:y["a"],VListItemContent:C["a"],VListItemTitle:C["c"],VPagination:S["a"],VRow:$["a"],VSpacer:T["a"],VTextField:L["a"]})},"11f1":function(t,e,a){"use strict";a("c35e")},"17b3":function(t,e,a){},"6f02":function(t,e,a){t.exports=a.p+"media/bg_sound.ff6f2ae4.mp3"},"891e":function(t,e,a){"use strict";a("17b3");var i=a("9d26"),s=a("dc22"),n=a("a9ad"),l=a("de2c"),o=a("7560"),r=a("58df");e["a"]=Object(r["a"])(n["a"],Object(l["a"])({onVisible:["init"]}),o["a"]).extend({name:"v-pagination",directives:{Resize:s["a"]},props:{circle:Boolean,disabled:Boolean,length:{type:Number,default:0,validator:t=>t%1===0},nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},totalVisible:[Number,String],value:{type:Number,default:0},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},wrapperAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.wrapper"}},data(){return{maxButtons:0,selected:null}},computed:{classes(){return{"v-pagination":!0,"v-pagination--circle":this.circle,"v-pagination--disabled":this.disabled,...this.themeClasses}},items(){const t=parseInt(this.totalVisible,10);if(0===t)return[];const e=Math.min(Math.max(0,t)||this.length,Math.max(0,this.maxButtons)||this.length,this.length);if(this.length<=e)return this.range(1,this.length);const a=e%2===0?1:0,i=Math.floor(e/2),s=this.length-i+1+a;if(this.value>i&&this.value<s){const t=1,e=this.length,s=this.value-i+2,n=this.value+i-2-a,l=s-1===t+1?2:"...",o=n+1===e-1?n+1:"...";return[1,l,...this.range(s,n),o,this.length]}if(this.value===i){const t=this.value+i-1-a;return[...this.range(1,t),"...",this.length]}if(this.value===s){const t=this.value-i+1;return[1,"...",...this.range(t,this.length)]}return[...this.range(1,i),"...",...this.range(s,this.length)]}},watch:{value(){this.init()}},mounted(){this.init()},methods:{init(){this.selected=null,this.$nextTick(this.onResize),setTimeout(()=>this.selected=this.value,100)},onResize(){const t=this.$el&&this.$el.parentElement?this.$el.parentElement.clientWidth:window.innerWidth;this.maxButtons=Math.floor((t-96)/42)},next(t){t.preventDefault(),this.$emit("input",this.value+1),this.$emit("next")},previous(t){t.preventDefault(),this.$emit("input",this.value-1),this.$emit("previous")},range(t,e){const a=[];t=t>0?t:1;for(let i=t;i<=e;i++)a.push(i);return a},genIcon(t,e,a,s,n){return t("li",[t("button",{staticClass:"v-pagination__navigation",class:{"v-pagination__navigation--disabled":a},attrs:{disabled:a,type:"button","aria-label":n},on:a?{}:{click:s}},[t(i["a"],[e])])])},genItem(t,e){const a=e===this.value&&(this.color||"primary"),i=e===this.value,s=i?this.currentPageAriaLabel:this.pageAriaLabel;return t("button",this.setBackgroundColor(a,{staticClass:"v-pagination__item",class:{"v-pagination__item--active":e===this.value},attrs:{type:"button","aria-current":i,"aria-label":this.$vuetify.lang.t(s,e)},on:{click:()=>this.$emit("input",e)}}),[e.toString()])},genItems(t){return this.items.map((e,a)=>t("li",{key:a},[isNaN(Number(e))?t("span",{class:"v-pagination__more"},[e.toString()]):this.genItem(t,e)]))},genList(t,e){return t("ul",{directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}],class:this.classes},e)}},render(t){const e=[this.genIcon(t,this.$vuetify.rtl?this.nextIcon:this.prevIcon,this.value<=1,this.previous,this.$vuetify.lang.t(this.previousAriaLabel)),this.genItems(t),this.genIcon(t,this.$vuetify.rtl?this.prevIcon:this.nextIcon,this.value>=this.length,this.next,this.$vuetify.lang.t(this.nextAriaLabel))];return t("nav",{attrs:{role:"navigation","aria-label":this.$vuetify.lang.t(this.wrapperAriaLabel)}},[this.genList(t,e)])}})},c35e:function(t,e,a){}}]);
//# sourceMappingURL=chunk-0fbcd145.4287f36f.js.map