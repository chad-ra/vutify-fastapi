(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3978d23b"],{"6d2a":function(t,e,a){},"7a40":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("waiting-modal",{attrs:{title:t.title,status:t.status,active:t.active_waiting},on:{statusdailog:t.update_status_wait}}),a("v-container",[a("v-row",{staticClass:"align-center d-flex h-0 pb-20"},[a("v-col",{staticClass:"mx-auto",staticStyle:{"text-align":"center"},attrs:{xl:"3",lg:"4",sm:"9"}},[a("v-card",{staticClass:"bg-orange"},[a("span",{staticClass:"text-purple"},[t._v("สแกนเพื่อทำแบบบันทึกประวัติสุขภาพผู้ป่วย")])]),a("br"),a("v-row",{},[a("v-col",{staticStyle:{"text-align":"center"},attrs:{cols:"12"}},[a("div",[a("p",{staticClass:"error"},[t._v(t._s(t.error))]),a("v-card",{attrs:{height:"300"}},[a("v-card-text",[a("qrcode-stream",{on:{decode:t.onDecode,init:t.onInit}}),a("br"),a("span",[t._v("สแกน QR ผู้ป่วย")])],1)],1)],1)])],1)],1)],1),a("v-row",{directives:[{name:"show",rawName:"v-show",value:!t.$vuetify.breakpoint.mobile,expression:"!$vuetify.breakpoint.mobile"}],staticClass:"align-center",staticStyle:{"padding-top":"15px"},attrs:{justify:"left"}},[a("v-col",{staticClass:"mx-auto",staticStyle:{"text-align":"left"},attrs:{xl:"3",lg:"4",sm:"9"}},[a("v-btn",{staticClass:"border-radius-xl",staticStyle:{"border-color":"#d6d6d629"},attrs:{outlined:"",color:"purple"},on:{click:function(e){return t.$router.go(-1)}}},[a("v-icon",{attrs:{small:""}},[t._v("west")])],1),t._v("         ")],1)],1),a("v-footer",{directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.mobile,expression:"$vuetify.breakpoint.mobile"}],staticClass:"action-nav",staticStyle:{height:"60px"},attrs:{fixed:""}},[a("v-row",{staticClass:"align-left",attrs:{justify:"left"}},[a("v-btn",{staticClass:"border-radius-xl",staticStyle:{"border-color":"#d6d6d629"},attrs:{outlined:"",color:"purple"},on:{click:function(e){return t.$router.go(-1)}}},[a("v-icon",{attrs:{small:""}},[t._v("west")])],1),t._v("         ")],1)],1)],1)],1)},s=[],r=a("087d"),o=a("5fb0"),n=a("2b0e"),l=a("bb6f"),c={name:"calendar-patient",components:{QrcodeStream:l["QrcodeStream"],WaitingModal:r["a"]},data:()=>({isValid:void 0,camera:"auto",result:null,token:"",size:100,active_waiting:!1,status:"",alert_name:""}),mounted(){},watch:{result(t){t.length>0&&this.submitVal()}},computed:{validationPending(){return void 0===this.isValid&&"off"===this.camera},validationSuccess(){return!0===this.isValid},validationFailure(){return!1===this.isValid}},methods:{update_status_wait(t){this.active_waiting=t},onDecode(t){this.result=t},handleClick(t){this.selected_row=t,this.dialog_edit=!0},edit_data(t){this.edit_aleart=t,this.dialog_edit=!0},async submitVal(){this.active_waiting=!0,this.title="",this.status="loading";var t=this.result.split("/")[1];await n["default"].axios.post(o["a"]+"/active_patient_qr",{user_scanner_id:this.$store.state.login_detail.user_id,current_qr:t},{headers:{"Content-Type":"application/json"}}).then(e=>{"this_qr_activated"==e.data.detail.status?(this.title="QR code ถูกต้อง",this.status="done",setTimeout(()=>{this.active_waiting=!1,this.$store.commit("setQrPatientId",("2"+t).slice(0,7)),this.$store.commit("setQrPatientInfo",e.data.detail.data),this.$router.push("/view_patient_health_record_add")},2e3)):"this_qr_not_correct"==e.data.detail.status?(this.active_waiting=!0,this.title="กรุณาให้ผู้ป่วยสร้าง QR ใหม่<br>และลองใหม่อีกครั้ง",this.status="fail"):(this.active_waiting=!0,this.title="ระบบขัดข้อง",this.status="fail")})},async onInit(t){try{await t}catch(e){"NotAllowedError"===e.name?this.error="ERROR: you need to grant camera access permission":"NotFoundError"===e.name?this.error="ERROR: no camera on this device":"NotSupportedError"===e.name?this.error="ERROR: secure context required (HTTPS, localhost)":"NotReadableError"===e.name?this.error="ERROR: is the camera already in use?":"OverconstrainedError"===e.name?this.error="ERROR: installed cameras are not suitable":"StreamApiNotSupportedError"===e.name?this.error="ERROR: Stream API is not supported in this browser":"InsecureContextError"===e.name?this.error="ERROR: Camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.":this.error=`ERROR: Camera error (${e.name})`}}}},d=c,u=(a("d8ef"),a("2877")),h=a("6544"),v=a.n(h),m=a("8336"),p=a("b0af"),_=a("99d9"),w=a("62ad"),b=a("a523"),f=a("553a"),g=a("132d"),R=a("0fd9"),x=Object(u["a"])(d,i,s,!1,null,"7b1a4952",null);e["default"]=x.exports;v()(x,{VBtn:m["a"],VCard:p["a"],VCardText:_["c"],VCol:w["a"],VContainer:b["a"],VFooter:f["a"],VIcon:g["a"],VRow:R["a"]})},d8ef:function(t,e,a){"use strict";a("6d2a")}}]);
//# sourceMappingURL=chunk-3978d23b.7d441d8d.js.map